<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GPS Game</title>
    <style>
        /* Add your CSS styling here */
        #myButton {
            padding: 10px;
            background-color: grey;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
        }
        #myButton:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <button id="myButton" disabled>Check-in</button>

    <script>
        // Add your JavaScript here
        const targetLatitude = 49.4469123;
        const targetLongitude = 32.0578783;
        const proximity = 5; // meters

        document.getElementById('myButton').addEventListener('click', function() {
            alert('Checkpoint activated!');
        });

        function checkProximity(position) {
            const userLatitude = position.coords.latitude;
            const userLongitude = position.coords.longitude;

            const distance = getDistanceFromLatLonInM(userLatitude, userLongitude, targetLatitude, targetLongitude);

            if (distance <= proximity) {
                document.getElementById('myButton').disabled = false;
            }
        }

        // Haversine formula to calculate distance
        function getDistanceFromLatLonInM(lat1, lon1, lat2, lon2) {
            var R = 6371; // Radius of the earth in km
            var dLat = deg2rad(lat2-lat1);
            var dLon = deg2rad(lon2-lon1);
            var a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
                Math.sin(dLon/2) * Math.sin(dLon/2)
                ; 
            var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
            var d = R * c; // Distance in km
            return d * 1000; // Distance in m
        }

        function deg2rad(deg) {
            return deg * (Math.PI/180)
        }

        // Check user's current position
        if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(checkProximity, function(error) {
                alert('Error getting location');
            });
        } else {
            alert('Geolocation is not supported by your browser');
        }
    </script>
</body>
</html>